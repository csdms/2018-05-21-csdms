<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Programming with Python</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://csdms.colorado.edu" title="Community Surface Dynamics Modeling System">
          <img alt="CSDMS banner" src="img/CSDMS_banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">Programming with Python</h1></a>
          <h2 class="subtitle">Writing numerical models with Python</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="learning-objectives"><span class="glyphicon glyphicon-certificate"></span>Learning Objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Explain what a for loop does</li>
<li>Correctly write for loops to repeat simple calculations</li>
<li>Trace changes to a loop variable as the loop runs</li>
<li>Trace changes to other variables as they are updated by a for loop</li>
<li>Write conditional statements including <code>if</code>, <code>elif</code>, and <code>else</code> branches</li>
<li>Correctly evaluate expressions containing <code>and</code> and <code>or</code></li>
</ul>
</div>
</section>
<p>Many members of our community focus on developing numerical models to study how landscapes evolve over time. The simplest and most commonly used transport law used to capture the evolution of hillslopes is a diffusion equation:</p>
<p><img src="figs/tex1.png" /> <br></p>
<p>where <span class="math inline"><em>z</em></span> is elevation, <span class="math inline"><em>x</em></span> is the horizontal distance, and <span class="math inline"><em>K</em></span> is a landscape diffusion coefficient.</p>
<p>After solving the equation, we’ll find that the elevation of a point at any timestep depends on the elevation of that point and its two neighbors at the previous timestep</p>
<h2 id="finite-difference-methods">Finite difference methods</h2>
<p>We can solve partial differential equations using finite difference methods by replacing the spatial and time derivatives with approximations that use the gridded data. <span class="math inline"><em>x</em><em>x</em></span> is the index along an array of x positions and <span class="math inline"><em>t</em><em>t</em></span> is the timestep.</p>
<p>The time derivative <span class="math inline">∂<em>z</em>/∂<em>t</em></span> can be approximated using a forward difference:</p>
<p><img src="figs/tex2.png" /> <br></p>
<p>The second spatial derivative can be approximated by combining a forward and a backwards difference:</p>
<p><img src="figs/tex3.png" /> <br></p>
<p>The diffusion equation can then be rewritten as:</p>
<p><img src="figs/tex4.png" /> <br></p>
<p>We can rearrange this equation to solve for the elevation <span class="math inline"><em>z</em></span> at position <span class="math inline"><em>x</em></span> at timestep <span class="math inline"><em>t</em> + 1</span>:</p>
<div class="figure">
<img src="figs/tex5.png" />

</div>
<h2 id="diffusion-in-1d">Diffusion in 1D</h2>
<p>Let’s start by simulating the evolution of a 1D profile across our dataset due to diffusion. First, we need to load libraries and import the dataset. We can then extract a profile across the DEM:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> numpy <span class="im">as</span> np
<span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt
<span class="op">%</span>matplotlib inline

topo <span class="op">=</span> np.loadtxt(<span class="st">&#39;data/topo.asc&#39;</span>)

profile <span class="op">=</span> topo[:,<span class="dv">120</span>]   <span class="co"># at some arbitrary position</span>

plt.plot(profile, <span class="st">&#39;k*-&#39;</span>)</code></pre></div>
<p><img src="figs/f03_output_2_1.png" /> <br> This is the topography at time <span class="math inline"><em>t</em> = 0</span>. We will be able to calculate the topography at time <span class="math inline"><em>t</em> = <em>d</em><em>t</em></span> at every point in the array with the equations we derived above.</p>
<p>Let’s create a new numpy array where we can store the new elevation values. The numpy function <code>zeros_like()</code> creates an array that’s the same shape as another array and where every value is zero:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">newProfile <span class="op">=</span> np.zeros_like(profile)

<span class="bu">print</span> profile.shape, profile.<span class="bu">max</span>()
<span class="bu">print</span> newProfile.shape, newProfile.<span class="bu">max</span>()</code></pre></div>
<pre class="output"><code>(500,) 3668.7078
(500,) 0.0</code></pre>
<p>Using the finite difference diffusion equation we derived above, we know that the new elevation value of any point along the profile will depend on the elevation values of that point and its two neighbors at the previous timestep.</p>
<p>Since they only have one neighbor each, we have to decide what to do about the first and last cells in the profile. The simplest solution is to keep their elevation fixed and not let them evolve:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">newProfile[<span class="dv">0</span>] <span class="op">=</span> profile[<span class="dv">0</span>]
newProfile[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> profile[<span class="op">-</span><span class="dv">1</span>]</code></pre></div>
<p>We can use the diffusion equation to calculate the elevation of the rest of the profile after one timestep.</p>
<p>Let’s start by solving the equation for only one cell. For the cell with index 1, it looks like this:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">K <span class="op">=</span> <span class="dv">1</span>
dt <span class="op">=</span> <span class="dv">1</span>
dx <span class="op">=</span> <span class="dv">2</span> <span class="co">#meters</span>

newProfile[<span class="dv">1</span>] <span class="op">=</span> profile[<span class="dv">1</span>] <span class="op">+</span> K <span class="op">*</span> dt <span class="op">*</span> (profile[<span class="dv">2</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> profile[<span class="dv">1</span>] <span class="op">+</span> profile[<span class="dv">0</span>]) <span class="op">/</span> dx<span class="op">**</span><span class="dv">2</span>

<span class="bu">print</span> profile[<span class="dv">0</span>:<span class="dv">3</span>]
<span class="bu">print</span> newProfile[<span class="dv">0</span>:<span class="dv">3</span>]</code></pre></div>
<pre class="output"><code>[ 3080.0466  3082.6816  3085.4751]
[ 3080.0466    3082.721225     0.      ]</code></pre>
<p>The value of dx is the cell spacing in the topo raster. We chose dummy values for K and dt.</p>
<p>The equation for the elevation of the cell with index 2 is very similar:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">newProfile[<span class="dv">2</span>] <span class="op">=</span> profile[<span class="dv">2</span>] <span class="op">+</span> K <span class="op">*</span> dt <span class="op">*</span> (profile[<span class="dv">3</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> profile[<span class="dv">2</span>] <span class="op">+</span> profile[<span class="dv">1</span>]) <span class="op">/</span> dx<span class="op">**</span><span class="dv">2</span>

<span class="bu">print</span> profile[<span class="dv">0</span>:<span class="dv">3</span>]
<span class="bu">print</span> newProfile[<span class="dv">0</span>:<span class="dv">3</span>]</code></pre></div>
<pre class="output"><code>[ 3080.0466  3082.6816  3085.4751]
[ 3080.0466    3082.721225  3085.565775]</code></pre>
<p>We could keep doing this for every single cell in the array, but it would get boring very quickly. The code would also not scale very well, since we wouldn’t be able to use it for longer or shorter profiles. It would also be very fragile - it’s very, very likely that we would accidentally introduce an error into the code by mistyping something.</p>
<h2 id="for-loops">For loops</h2>
<p>Automating repetitive tasks is best accomplished with a loop. A <strong>for loop</strong> repeats a set of actions for every item in a collection (every letter in a word, every number in some range, every name in a list) until it runs out of items:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">word <span class="op">=</span> <span class="st">&#39;lead&#39;</span>
<span class="cf">for</span> char <span class="kw">in</span> word:
    <span class="bu">print</span> char</code></pre></div>
<pre class="output"><code>l
e
a
d</code></pre>
<p>This is shorter than writing individual statements for printing every letter in the word. It it also robust - it scales to longer or shorter words without any trouble:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">word <span class="op">=</span> <span class="st">&#39;aluminium&#39;</span>
<span class="cf">for</span> char <span class="kw">in</span> word:
    <span class="bu">print</span> char</code></pre></div>
<pre class="output"><code>a
l
u
m
i
n
i
u
m</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">word <span class="op">=</span> <span class="st">&#39;tin&#39;</span>
<span class="cf">for</span> char <span class="kw">in</span> word:
    <span class="bu">print</span> char</code></pre></div>
<pre class="output"><code>t
i
n</code></pre>
<p>The script uses a for loop to repeat an operation — in this case, printing — once for each thing in a sequence. The general form of a loop is:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> item <span class="kw">in</span> collection:
    do things <span class="cf">with</span> item</code></pre></div>
<p>A for loop starts with the word “for”, then the name of the <strong>loop variable</strong>, then the word “in”, and then the collection or sequence of items to loop through. We can call the <em>loop variable</em> anything we like.</p>
<p>In Python, there must be a colon at the end of the line starting the loop. The commands that are run repeatedly inside the loop are indented below that. Unlike many other languages, there is no command to end a loop (e.g. <code>end for</code>): the loop ends once the indentation moves back.</p>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="whats-in-a-name"><span class="glyphicon glyphicon-pushpin"></span>What’s in a name?</h2>
</div>
<div class="panel-body">
<p>In the example above, the loop variable was given the name <code>char</code> as a mnemonic; it is short for ‘character’. ‘Char’ is not a keyword in Python that pulls the characters from words or strings. In fact, if we run the same loop over a list rather than a word, the output will be each member of that list printed in order, not the characters.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">elements <span class="op">=</span> [<span class="st">&#39;oxygen&#39;</span>, <span class="st">&#39;nitrogen&#39;</span>, <span class="st">&#39;argon&#39;</span>]
<span class="cf">for</span> char <span class="kw">in</span> elements:
  <span class="bu">print</span> char</code></pre></div>
<pre class="output"><code>oxygen
nitrogen
argon</code></pre>
<p>We can choose any name we want for variables. We might just as easily have chosen the name <code>frog</code> for the loop variable, as long as we use the same name when we invoke the variable inside the loop:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">the_great_big_pond <span class="op">=</span> <span class="st">&#39;oxygen&#39;</span>
<span class="cf">for</span> frog <span class="kw">in</span> the_great_big_pond:
  <span class="bu">print</span> frog</code></pre></div>
<pre class="output"><code>o
x
y
g
e
n</code></pre>
<p>While creative variable names can be very funny, it is a good idea to choose variable names that are meaningful so that it is easier to understand what the code is doing.</p>
</div>
</aside>
<p>Here’s another loop that repeatedly updates a variable:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">length <span class="op">=</span> <span class="dv">0</span>
word <span class="op">=</span> <span class="st">&#39;elephant&#39;</span>
<span class="cf">for</span> letter <span class="kw">in</span> word:
    length <span class="op">=</span> length <span class="op">+</span> <span class="dv">1</span>
<span class="bu">print</span> <span class="st">&#39;There are&#39;</span>, length, <span class="st">&#39;letters in&#39;</span>, word</code></pre></div>
<pre class="output"><code>There are 8 letters in elephant</code></pre>
<p>It’s worth tracing the execution of this little program step by step. Since there are eight characters in ‘elephant’, the statement inside the loop will be executed eight times. The first time around, <code>length</code> is zero (the value assigned to it on line 1) and <code>letter</code> is “e”. The code adds 1 to the old value of <code>length</code>, producing 1, and updates <code>length</code> to refer to that new value. The next time the loop starts, <code>letter</code> is “l” and <code>length</code> is 1, so <code>length</code> is updated to 2. Once there are no characters left in “elephant” for Python to assign to <code>letter</code>, the loop finishes and the <code>print</code> statement tells us the final value of length.</p>
<p>Note that a loop variable is just a variable that’s being used to record progress in a loop. It still exists after the loop is over (and has the last value it had inside the loop). We can re-use variables previously defined as loop variables, overwriting their value:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">letter <span class="op">=</span> <span class="st">&#39;z&#39;</span>
<span class="cf">for</span> letter <span class="kw">in</span> <span class="st">&#39;abc&#39;</span>:
    <span class="bu">print</span> letter
<span class="bu">print</span> <span class="st">&#39;after the loop, letter is&#39;</span>, letter</code></pre></div>
<pre class="output"><code>a
b
c
after the loop, letter is c</code></pre>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="built-in-functions"><span class="glyphicon glyphicon-pushpin"></span>Built-in functions</h2>
</div>
<div class="panel-body">
<p>We saw it before but it’s worth repeating: finding the length of a string is such a common operation that Python actually has a built-in function to do it called <code>len()</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span> <span class="bu">len</span>(<span class="st">&#39;elephant&#39;</span>)</code></pre></div>
<pre class="output"><code>8</code></pre>
<p><code>len</code> is much faster than any function we could write ourselves and much easier to read than a multi-line loop. It can also give us the length of many other types of objects, so we should always use it when we can.</p>
</div>
</aside>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="from-0-to-n"><span class="glyphicon glyphicon-pencil"></span>From 0 to N</h2>
</div>
<div class="panel-body">
<p>Python has a built-in function called <strong>range</strong> that creates a sequence of numbers. Range can accept 1-3 parameters. If one parameter is passed, <code>range</code> creates an array of that length, starting at zero and incrementing by 1. If 2 parameters are passed, <code>range</code> starts at the first and ends just before the second, incrementing by one. If <code>range</code> is passed 3 parameters, it starts at the first one, ends just before the second one, and increments by the third one. For example, <code>range(3)</code> produces a list with the numbers 0, 1, 2, while <code>range(2, 5)</code> produces 2, 3, 4, and <code>range(3, 10, 3)</code> produces 3, 6, 9.</p>
<p>Using <code>range</code>, write a loop that prints the first 3 natural numbers:</p>
<pre class="output"><code>1
2
3</code></pre>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">4</span>):
  <span class="bu">print</span> i</code></pre></div>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="computing-powers-with-loops"><span class="glyphicon glyphicon-pencil"></span>Computing powers with loops</h2>
</div>
<div class="panel-body">
<p>Exponentiation is built into Python:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span> <span class="dv">5</span><span class="op">**</span><span class="dv">3</span>
<span class="dv">125</span></code></pre></div>
<p>Write a loop that calculates the same result as <code>5 ** 3</code> using just multiplication (without exponentiation).</p>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">result <span class="op">=</span> <span class="dv">1</span>
<span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">3</span>):
  result <span class="op">=</span> result <span class="op">*</span> <span class="dv">5</span>
<span class="bu">print</span> result</code></pre></div>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="turn-a-string-into-a-list"><span class="glyphicon glyphicon-pencil"></span>Turn a string into a list</h2>
</div>
<div class="panel-body">
<p>Use a for-loop to convert the string “hello” into a list of letters:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">[<span class="st">&quot;h&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;o&quot;</span>]</code></pre></div>
<p>Hint: You can create an empty list like this:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">my_list <span class="op">=</span> []</code></pre></div>
<p>Bonus: Once you are done, try casting a string as a list and see what happens.</p>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">my_list <span class="op">=</span> []
<span class="cf">for</span> char <span class="kw">in</span> <span class="st">&quot;hello&quot;</span>:
  newstring <span class="op">=</span> char <span class="op">+</span> newstring
<span class="bu">print</span> my_list</code></pre></div>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="reverse-a-string"><span class="glyphicon glyphicon-pencil"></span>Reverse a string</h2>
</div>
<div class="panel-body">
<p>Knowing that two strings can be concatenated using the <code>+</code> operator, write a loop that takes a string, and produces a new string with the characters in reverse order, so <code>'Newton'</code> becomes <code>'notweN'</code>.</p>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">newstring <span class="op">=</span> <span class="st">&#39;&#39;</span>
oldstring <span class="op">=</span> <span class="st">&#39;Newton&#39;</span>
<span class="cf">for</span> char <span class="kw">in</span> oldstring:
  newstring <span class="op">=</span> char <span class="op">+</span> newstring
<span class="bu">print</span> newstring</code></pre></div>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="computing-the-value-of-a-polynomial-advanced"><span class="glyphicon glyphicon-pencil"></span>Computing the value of a polynomial (Advanced)</h2>
</div>
<div class="panel-body">
<p>The built-in function <strong>enumerate</strong> takes a sequence (e.g. a list) and generates a new sequence of the same length. Each element of the new sequence is a pair composed of the index (0, 1, 2,…) and the value from the original sequence:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> i, x <span class="kw">in</span> <span class="bu">enumerate</span>(xs):
   <span class="co"># Do something with i and x</span></code></pre></div>
<p>The loop above assigns the index to <code>i</code> and the value to <code>x</code>.</p>
<p>Suppose you have encoded a polynomial as a list of coefficients in the following way: the first element is the constant term, the second element is the coefficient of the linear term, the third is the coefficient of the quadratic term, etc.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">x <span class="op">=</span> <span class="dv">5</span>
cc <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>]
y <span class="op">=</span> cc[<span class="dv">0</span>] <span class="op">*</span> x<span class="op">**</span><span class="dv">0</span> <span class="op">+</span> cc[<span class="dv">1</span>] <span class="op">*</span> x<span class="op">**</span><span class="dv">1</span> <span class="op">+</span> cc[<span class="dv">2</span>] <span class="op">*</span> x<span class="op">**</span><span class="dv">2</span></code></pre></div>
<p>Write a loop using enumerate(cc) which computes the value <code>y</code> of any polynomial, given <code>x</code> and <code>cc</code>.</p>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">y <span class="op">=</span> <span class="dv">0</span>
<span class="cf">for</span> i, c <span class="kw">in</span> <span class="bu">enumerate</span>(cc):
  y <span class="op">=</span> y <span class="op">+</span> x<span class="op">**</span>i <span class="op">*</span> c</code></pre></div>
</div>
</section>
</div>
</section>
<h2 id="looping-through-the-profile">Looping through the profile</h2>
<p>Instead of writing the same equation for each cell in the profile, we can use a for loop that runs the equation for each of the interior cells.</p>
<p>Let’s write a for loop that calls each cell of the profile by its index. Since we are fixing the elevation at the boundaries, our loop should only call cells with indices 1 through <code>len(profile)-1</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="bu">len</span>(profile)<span class="op">-</span><span class="dv">1</span>):

    <span class="co"># an equation in parentheses can be split into multiple lines!</span>
    newProfile[i] <span class="op">=</span> (profile[i] <span class="op">+</span>
                     K <span class="op">*</span> dt <span class="op">*</span> (profile[i<span class="op">+</span><span class="dv">1</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> profile[i] <span class="op">+</span> profile[i<span class="op">-</span><span class="dv">1</span>])
                     <span class="op">/</span> dx<span class="op">**</span><span class="dv">2</span>)
    
plt.plot(profile <span class="op">-</span> newProfile)</code></pre></div>
<p><img src="figs/f03_output_27_1.png" /> <br></p>
<p>By plotting the difference between the old and new profiles, we can confirm that our for loop acted along the full length of the profile. <BR></p>
<p>We now have all the pieces to write a script that will evolve the profile by one timestep:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> numpy <span class="im">as</span> np
<span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt
<span class="op">%</span>matplotlib inline

topo <span class="op">=</span> np.loadtxt(<span class="st">&#39;data/topo.asc&#39;</span>)
profile <span class="op">=</span> topo[:,<span class="dv">120</span>]

K <span class="op">=</span> <span class="dv">1</span>
dt <span class="op">=</span> <span class="dv">1</span>
dx <span class="op">=</span> <span class="dv">2</span> <span class="co"># meters</span>

newProfile <span class="op">=</span> np.zeros_like(profile)

newProfile[<span class="dv">0</span>] <span class="op">=</span> profile[<span class="dv">0</span>]
newProfile[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> profile[<span class="op">-</span><span class="dv">1</span>]

<span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="bu">len</span>(profile)<span class="op">-</span><span class="dv">1</span>):

    newProfile[i] <span class="op">=</span> (profile[i] <span class="op">+</span>
                     K <span class="op">*</span> dt <span class="op">*</span> (profile[i<span class="op">+</span><span class="dv">1</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> profile[i] <span class="op">+</span> profile[i<span class="op">-</span><span class="dv">1</span>])
                     <span class="op">/</span> dx<span class="op">**</span><span class="dv">2</span>)</code></pre></div>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="vectorized-math-is-faster"><span class="glyphicon glyphicon-pushpin"></span>Vectorized math is faster!</h2>
</div>
<div class="panel-body">
<p>Python, like Matlab, will (usually!) do math much faster if it’s operating on vectors than if it’s using loops. You should avoid loops to make your code as efficient as possible – our script is a very bad example!</p>
</div>
</aside>
<p>One timestep is not enough time for the topographic profile to evolve much. We could increase the value of <code>dt</code>, but we can’t change it much before the code becomes numerically unstable. Instead, we want to run our code repeatedly so the profile can change gradually. We can wrap it all in another for loop that steps through time:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> numpy <span class="im">as</span> np
<span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt
<span class="op">%</span>matplotlib inline

topo <span class="op">=</span> np.loadtxt(<span class="st">&#39;data/topo.asc&#39;</span>)
profile <span class="op">=</span> topo[:,<span class="dv">120</span>]

K <span class="op">=</span> <span class="dv">1</span>
dt <span class="op">=</span> <span class="dv">1</span>
dx <span class="op">=</span> <span class="dv">2</span> <span class="co"># meters</span>

maxt <span class="op">=</span> <span class="dv">10</span>

<span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,maxt,dt):

    newProfile <span class="op">=</span> np.zeros_like(profile)

    newProfile[<span class="dv">0</span>] <span class="op">=</span> profile[<span class="dv">0</span>]
    newProfile[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> profile[<span class="op">-</span><span class="dv">1</span>]

    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="bu">len</span>(profile)<span class="op">-</span><span class="dv">1</span>):
    
        newProfile[i] <span class="op">=</span> (profile[i] <span class="op">+</span>
                        K <span class="op">*</span> dt <span class="op">*</span> (profile[i<span class="op">+</span><span class="dv">1</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> profile[i] <span class="op">+</span> profile[i<span class="op">-</span><span class="dv">1</span>])
                        <span class="op">/</span> dx<span class="op">**</span><span class="dv">2</span>)</code></pre></div>
<p>There is a serious problem with this script: the time loop is always calculating the evolution of the original topography, not the new profile! We need to rewrite our script so the “new” profile becomes the “old” profile before going around the loop again.</p>
<p>Because numpy arrays are immutable objects, we need to make a true copy of the new profile instead of just using the equal sign. Let’s also add a plotting function so we can see how the profile changes over time:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> numpy <span class="im">as</span> np
<span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt
<span class="op">%</span>matplotlib inline

topo <span class="op">=</span> np.loadtxt(<span class="st">&#39;data/topo.asc&#39;</span>)
profile <span class="op">=</span> topo[:,<span class="dv">120</span>]

K <span class="op">=</span> <span class="dv">1</span>
dt <span class="op">=</span> <span class="dv">1</span>
dx <span class="op">=</span> <span class="dv">2</span> <span class="co">#meters</span>

maxt <span class="op">=</span> <span class="dv">50</span>

plt.plot(profile)

<span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,maxt,dt):

    newProfile <span class="op">=</span> np.zeros_like(profile)

    newProfile[<span class="dv">0</span>] <span class="op">=</span> profile[<span class="dv">0</span>]
    newProfile[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> profile[<span class="op">-</span><span class="dv">1</span>]

    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="bu">len</span>(profile)<span class="op">-</span><span class="dv">1</span>):
        newProfile[i] <span class="op">=</span> (profile[i] <span class="op">+</span>
                        K <span class="op">*</span> dt <span class="op">*</span> (profile[i<span class="op">+</span><span class="dv">1</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> profile[i] <span class="op">+</span> profile[i<span class="op">-</span><span class="dv">1</span>])
                        <span class="op">/</span> dx<span class="op">**</span><span class="dv">2</span>)
        
    profile <span class="op">=</span> newProfile.copy()
    
    plt.plot(profile)
    plt.xlim((<span class="dv">200</span>,<span class="dv">250</span>))   <span class="co"># to focus in on the detail</span>
    plt.ylim((<span class="dv">3450</span>,<span class="dv">3550</span>))
    </code></pre></div>
<div class="figure">
<img src="figs/f03_output_34_0.png" />

</div>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="numerical-instabilities"><span class="glyphicon glyphicon-pencil"></span>Numerical instabilities</h2>
</div>
<div class="panel-body">
<p>Consider three cells somewhere along the profile where the middle cell is the lowest. From the diffusion equation, know that the two outer cells would drop in elevation over time while the middle one would move up.</p>
<ul>
<li>What will the profile look like after one timestep if the value of <code>dt</code> is very (very!) large? (Hint: Stop thinking of the real world and look at the equation. What does <code>dt</code> do to each term?)</li>
</ul>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<p>The timestep <code>dt</code> is multiplied by the change in elevation per unit time. The change in elevation will be larger for larger timesteps. If the timestep is very large, the equation will calculate the total change over the timestep based only on the rate of change at the beginning of the timestep, even if, in real life, the rate of change would have decreased over the same period of time. As a result, the new elevations might “overshoot”, changing the three cells from a valley to a hill. This can lead to a numerical instability.</p>
</div>
</section>
</div>
</section>
<p>We had to zoom into a small section of the profile to see that the topography was evolving. Because we are plotting every time it goes around the time loop, though, there are too many lines and they are too close together to differentiate between the different profiles.</p>
<p>Let’s run the plotting commands every 10 timesteps instead. There are several ways we can detect when 10 timesteps have passed:</p>
<ul>
<li><p>Add a counter that increases by 1 every time the time loop goes around. When the counter is equal to 10, a new plot is created and the counter resets to 0.</p></li>
<li><p>The value of the loop variable <code>t</code> will be divisible by <code>10*dt</code> every 10 timesteps. The <strong>Modulus operator</strong> <code>%</code> divides two numbers and returns the remainder, so the operation <code>t%(10*dt)</code> will be equal to zero every 10 timesteps.</p></li>
</ul>
<p>Both options require that our script choose to run some commands if one condition is True and others if the condition is False.</p>
<h2 id="making-choices">Making Choices</h2>
<p>When analyzing data, we’ll often want to automatically recognize differences between values and take different actions on the data depending on some conditions. Here, we’ll learn how to write code that decides if some conditions are met.</p>
<h3 id="conditionals">Conditionals</h3>
<p>We can use an <strong>if statement</strong> to running different commands depending on whether some condition is True or False:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">num <span class="op">=</span> <span class="dv">42</span>

<span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">100</span>:
    <span class="bu">print</span> <span class="st">&#39;greater&#39;</span>
<span class="cf">else</span>:
    <span class="bu">print</span> <span class="st">&#39;not greater&#39;</span>
    
<span class="bu">print</span> <span class="st">&#39;done&#39;</span></code></pre></div>
<pre class="output"><code>not greater
done</code></pre>
<p>We use the keyword <code>if</code> to tell Python that we want to make a choice. If the test that follows the <code>if</code> statement is true, the commands in the indented block are executed. If the test is false, the indented block beneath the <code>else</code> is executed instead. Only one or the other is ever executed – a conditional statement cannot be simultaneously True and False!</p>
<p>Conditional statements don’t have to include an <code>else</code>. If there isn’t one, Python simply does nothing if the test is false:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">num <span class="op">=</span> <span class="dv">42</span>

<span class="bu">print</span> <span class="st">&#39;before conditional...&#39;</span>

<span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">100</span>:
    <span class="bu">print</span> num, <span class="st">&#39;is greater than 100&#39;</span>
    
<span class="bu">print</span> <span class="st">&#39;...after conditional&#39;</span></code></pre></div>
<pre class="output"><code>before conditional...
...after conditional</code></pre>
<p>We can also chain several tests together using <code>elif</code>, which is short for “else if”. The following Python code uses elif to print the sign of a number. We use a double equals sign <code>==</code> to test for equality between two values:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">num <span class="op">=</span> <span class="op">-</span><span class="dv">3</span>

<span class="cf">if</span> num <span class="op">&gt;</span> <span class="dv">0</span>:
    <span class="bu">print</span> num, <span class="st">&quot;is positive&quot;</span>
<span class="cf">elif</span> num <span class="op">==</span> <span class="dv">0</span>:
    <span class="bu">print</span> num, <span class="st">&quot;is zero&quot;</span>
<span class="cf">else</span>:
    <span class="bu">print</span> num, <span class="st">&quot;is negative&quot;</span></code></pre></div>
<pre class="output"><code>-3 is negative</code></pre>
<p>We can also combine tests using <code>and</code> and <code>or</code>. <code>and</code> is only true if both tests are true:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">if</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="kw">and</span> (<span class="op">-</span><span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">0</span>):
    <span class="bu">print</span> <span class="st">&#39;both tests are true&#39;</span>
<span class="cf">else</span>:
    <span class="bu">print</span> <span class="st">&#39;at least one test is false&#39;</span></code></pre></div>
<pre class="output"><code>at least one test is false</code></pre>
<p>while <code>or</code> is true if at least one test is true:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">if</span> (<span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="kw">or</span> (<span class="op">-</span><span class="dv">1</span> <span class="op">&gt;</span> <span class="dv">0</span>):
    <span class="bu">print</span> <span class="st">&#39;at least one test is true&#39;</span>
<span class="cf">else</span>:
    <span class="bu">print</span> <span class="st">&#39;neither test is true&#39;</span></code></pre></div>
<pre class="output"><code>at least one test is true</code></pre>
<p>Let’s add a counter to our script so a line is added to the plot only once every 10 timesteps:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> numpy <span class="im">as</span> np
<span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt
<span class="op">%</span>matplotlib inline

topo <span class="op">=</span> np.loadtxt(<span class="st">&#39;data/topo.asc&#39;</span>)
profile <span class="op">=</span> topo[:,<span class="dv">120</span>]

K <span class="op">=</span> <span class="dv">1</span>
dt <span class="op">=</span> <span class="dv">1</span>
dx <span class="op">=</span> <span class="dv">2</span> <span class="co">#meters</span>

maxt <span class="op">=</span> <span class="dv">50</span>
counter <span class="op">=</span> <span class="dv">0</span>

plt.plot(profile)

<span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,maxt,dt):

    newProfile <span class="op">=</span> np.zeros_like(profile)

    newProfile[<span class="dv">0</span>] <span class="op">=</span> profile[<span class="dv">0</span>]
    newProfile[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> profile[<span class="op">-</span><span class="dv">1</span>]

    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="bu">len</span>(profile)<span class="op">-</span><span class="dv">1</span>):
        newProfile[i] <span class="op">=</span> (profile[i] <span class="op">+</span>
                        K <span class="op">*</span> dt <span class="op">*</span> (profile[i<span class="op">+</span><span class="dv">1</span>] <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> profile[i] <span class="op">+</span> profile[i<span class="op">-</span><span class="dv">1</span>])
                        <span class="op">/</span> dx<span class="op">**</span><span class="dv">2</span>)
        
    profile <span class="op">=</span> newProfile.copy()
    
    <span class="cf">if</span> counter <span class="op">==</span> <span class="dv">10</span>:
        
        counter <span class="op">=</span> <span class="dv">0</span>
    
        plt.plot(profile)
        plt.xlim((<span class="dv">200</span>,<span class="dv">250</span>))
        plt.ylim((<span class="dv">3450</span>,<span class="dv">3550</span>))
    </code></pre></div>
<div class="figure">
<img src="figs/f03_output_48_0.png" />

</div>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="how-many-paths"><span class="glyphicon glyphicon-pencil"></span>How many paths?</h2>
</div>
<div class="panel-body">
<p>Which of the following would be printed if you were to run this code? Why did you pick this answer?</p>
<ol style="list-style-type: decimal">
<li>A</li>
<li>B</li>
<li>C</li>
<li>B and C</li>
</ol>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">if</span> <span class="dv">4</span> <span class="op">&gt;</span> <span class="dv">5</span>:
    <span class="bu">print</span> <span class="st">&#39;A&#39;</span> 
<span class="cf">elif</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">5</span>:
    <span class="bu">print</span> <span class="st">&#39;B&#39;</span> 
<span class="cf">elif</span> <span class="dv">4</span> <span class="op">&lt;</span> <span class="dv">5</span>:
    <span class="bu">print</span> <span class="st">&#39;C&#39;</span></code></pre></div>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<p>C gets printed because the first two conditions, 4 &gt; 5 and 4 == 5, are not true, but 4 &lt; 5 is true.</p>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="what-is-truth"><span class="glyphicon glyphicon-pencil"></span>What is truth?</h2>
</div>
<div class="panel-body">
<p><code>True</code> and <code>False</code> are special words in Python called <code>booleans</code> which represent true and false statements. However, they aren’t the only values in Python that are true and false. In fact, any value can be used in an <code>if</code> or <code>elif</code>. After reading and running the code below, explain what the rule is for which values are considered true and which are considered false.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">if</span> <span class="st">&#39;&#39;</span>:
    <span class="bu">print</span> <span class="st">&#39;empty string is true&#39;</span>
<span class="cf">if</span> <span class="st">&#39;word&#39;</span>:
    <span class="bu">print</span> <span class="st">&#39;word is true&#39;</span>
<span class="cf">if</span> []:
    <span class="bu">print</span> <span class="st">&#39;empty list is true&#39;</span>
<span class="cf">if</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]:
    <span class="bu">print</span> <span class="st">&#39;non-empty list is true&#39;</span>
<span class="cf">if</span> <span class="dv">0</span>:
    <span class="bu">print</span> <span class="st">&#39;zero is true&#39;</span>
<span class="cf">if</span> <span class="dv">1</span>:
    <span class="bu">print</span> <span class="st">&#39;one is true&#39;</span></code></pre></div>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="thats-not-not-what-i-mean"><span class="glyphicon glyphicon-pencil"></span>That’s not not what I mean</h2>
</div>
<div class="panel-body">
<p>Sometimes it is useful to check whether some condition is not true. The Boolean operator <code>not</code> can do this explicitly. After reading and running the code below, write some more <code>if</code> statements that use <code>not</code> to test the rule that you formulated in the previous challenge.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">if</span> <span class="kw">not</span> <span class="st">&#39;&#39;</span>:
   <span class="bu">print</span> <span class="st">&#39;empty string is not true&#39;</span>
<span class="cf">if</span> <span class="kw">not</span> <span class="kw">not</span> <span class="va">True</span>:
   <span class="bu">print</span> <span class="st">&#39;not not True is true&#39;</span></code></pre></div>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="close-enough"><span class="glyphicon glyphicon-pencil"></span>Close enough</h2>
</div>
<div class="panel-body">
<p>Write some conditions that print <code>True</code> if the variable <code>a</code> is within 10% of the variable <code>b</code> and <code>False</code> otherwise. Compare your implementation with your partner’s: do you get the same answer for all possible values of <code>a</code> and <code>b</code>?</p>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">a <span class="op">=</span> <span class="dv">5</span>
b <span class="op">=</span> <span class="fl">5.1</span>

<span class="cf">if</span> <span class="bu">abs</span>(a <span class="op">-</span> b) <span class="op">&lt;</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="bu">abs</span>(b):
   <span class="bu">print</span> <span class="st">&#39;True&#39;</span>
<span class="cf">else</span>:
   <span class="bu">print</span> <span class="st">&#39;False&#39;</span></code></pre></div>
<p>You could also just print the output of the conditional statement:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span> <span class="bu">abs</span>(a <span class="op">-</span> b) <span class="op">&lt;</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="bu">abs</span>(b)</code></pre></div>
<p>This works because the Booleans <code>True</code> and <code>False</code> have string representations which can be printed.</p>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="sorting-a-list-into-buckets-advanced"><span class="glyphicon glyphicon-pencil"></span>Sorting a List Into Buckets (Advanced)</h2>
</div>
<div class="panel-body">
<p>The folder containing your collaborator’s data files has large data sets with names that start with “survey-”, small ones whose names with “small-”, and possibly other files. Our goal is to sort those files into three lists called <code>large_files</code>, <code>small_files</code>, and <code>other_files</code>. Complete the script below.</p>
<p>Hint: You could you the keyword <code>in</code> or the string method <a href="https://docs.python.org/2.7/library/stdtypes.html#str.startswith"><code>startswith</code></a></p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">files <span class="op">=</span> [<span class="st">&#39;survey-summer2017.csv&#39;</span>, <span class="st">&#39;myscript.py&#39;</span>, <span class="st">&#39;survey-summer2016.csv&#39;</span>, <span class="st">&#39;small-01.csv&#39;</span>, <span class="st">&#39;funny_field_photo.jpg&#39;</span>, <span class="st">&#39;small-02.csv&#39;</span>]
large_files <span class="op">=</span> []
small_files <span class="op">=</span> []
other_files <span class="op">=</span> []</code></pre></div>
<p>Your solution should:</p>
<ol style="list-style-type: decimal">
<li>loop over the names of the files</li>
<li>figure out which group each filename belongs to</li>
<li>append the filename to that list</li>
</ol>
<p>In the end the three lists should be:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">large_files <span class="op">=</span> [<span class="st">&#39;survey-summer2017.csv&#39;</span>, <span class="st">&#39;survey-summer2016.csv&#39;</span>]
small_files <span class="op">=</span> [<span class="st">&#39;small-01.csv&#39;</span>, <span class="st">&#39;small-02.csv&#39;</span>]
other_files <span class="op">=</span> [<span class="st">&#39;myscript.py&#39;</span>, <span class="st">&#39;funny_field_photo.jpg&#39;</span>]</code></pre></div>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> filename <span class="kw">in</span> files:
   <span class="cf">if</span> <span class="st">&#39;survey-&#39;</span> <span class="kw">in</span> filename:
       large_files.append(filename)
   <span class="cf">elif</span> <span class="st">&#39;small-&#39;</span> <span class="kw">in</span> filename:
       small_files.append(filename)
   <span class="cf">else</span>:
       other_files.append(filename)
       
<span class="bu">print</span> large_files 
<span class="bu">print</span> small_files
<span class="bu">print</span> other_files</code></pre></div>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="counting-vowels-advanced"><span class="glyphicon glyphicon-pencil"></span>Counting Vowels (Advanced)</h2>
</div>
<div class="panel-body">
<ol style="list-style-type: decimal">
<li>Write a loop that counts the number of vowels in a character string.</li>
<li>Test it on a few individual words and full sentences.</li>
<li>Once you are done, compare your solution to your neighbor’s. How did you handle capitalization?</li>
</ol>
<section class="challenge panel panel-solution">
<div class="panel-heading solution">
<h2 id="solution">Solution </h2><BR>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">vowels <span class="op">=</span> <span class="st">&#39;aeiouAEIOU&#39;</span>
sentence <span class="op">=</span> <span class="st">&#39;Mary had a little lamb.&#39;</span>
count <span class="op">=</span> <span class="dv">0</span>
<span class="cf">for</span> char <span class="kw">in</span> sentence:
   <span class="cf">if</span> char <span class="kw">in</span> vowels:
       count <span class="op">+=</span> <span class="dv">1</span>
       
<span class="bu">print</span> <span class="st">&quot;The number of vowels in this string is &quot;</span> <span class="op">+</span> <span class="bu">str</span>(count)</code></pre></div>
<p>You could also use the string method <code>lower</code> to avoid dealing with uppercase letters:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">vowels <span class="op">=</span> <span class="st">&#39;aeiou&#39;</span>
sentence <span class="op">=</span> <span class="st">&#39;Mary had a little lamb.&#39;</span>
count <span class="op">=</span> <span class="dv">0</span>
<span class="cf">for</span> char <span class="kw">in</span> sentence.lower():
   <span class="cf">if</span> char <span class="kw">in</span> vowels:
       count <span class="op">+=</span> <span class="dv">1</span>
       
<span class="bu">print</span> <span class="st">&quot;The number of vowels in this string is &quot;</span> <span class="op">+</span> <span class="bu">str</span>(count)</code></pre></div>
</div>
</section>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="vectorize-your-code-advanced"><span class="glyphicon glyphicon-pencil"></span>Vectorize your code (Advanced)</h2>
</div>
<div class="panel-body">
<p>Using vectorized math instead of loops in your code will make it run faster. Vectorize your 1D code and compare the speed of the two versions.</p>
<p>To measure how long it takes your code to run, you can use the <code>time</code> library:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> time

t <span class="op">=</span> time.time()
<span class="co"># do stuff</span>
elapsed <span class="op">=</span> time.time() <span class="op">-</span> t</code></pre></div>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="diffusion-in-2d-advanced"><span class="glyphicon glyphicon-pencil"></span>Diffusion in 2D (Advanced)</h2>
</div>
<div class="panel-body">
<p>The hillslope diffusion equation in 2D is: <br> <img src="figs/tex6.png" /> <br> Using finite difference methods, we can write an expression for the evolving topography:</p>
<p>We can rearrange this equation to solve for the elevation <span class="math inline"><em>z</em></span> at position <span class="math inline"><em>x</em><em>x</em>, <em>y</em><em>y</em></span> at timestep <span class="math inline"><em>t</em> + 1</span>: <br></p>
<p><img src="figs/tex7.png" /> <br> Use this equation to model the evolution of the topo array in 2 dimensions.</p>
</div>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://csdms.colorado.edu">CSDMS</a>
        <a class="label swc-blue-bg" href="https://github.com/mperignon/2016-05-16-csdms/">Source</a>
        <a class="label swc-blue-bg" href="mailto:perignon@colorado.edu">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/lesson.js"></script>
  </body>
</html>
